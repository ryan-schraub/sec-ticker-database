<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SEC Filing Tracker</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
    <style>
        body { font-family: sans-serif; margin: 20px; background: #f4f7f6; }
        .card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #eee; }
        th { background: #004a99; color: white; }
        .btn { background: #28a745; color: white; text-decoration: none; padding: 5px 10px; border-radius: 4px; font-size: 12px; }
        #search { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; }
    </style>
</head>
<body>
    <div class="card">
        <h2>Corporate Filing Database</h2>
        <input type="text" id="search" placeholder="Search ticker..." onkeyup="filter()">
        <table id="mainTable">
            <thead>
                <tr>
                    <th>Ticker</th>
                    <th>Company</th>
                    <th>Next Earnings</th>
                    <th>Latest 10-K/Q</th>
                    <th>Link</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
    <script>
        async function load() {
            const r = await fetch('tickers_preview.csv');
            const data = await r.text();
            Papa.parse(data, {
                header: true,
                complete: (results) => {
                    const tbody = document.querySelector('#mainTable tbody');
                    results.data.forEach(row => {
                        if (!row.Ticker) return;
                        const tr = document.createElement('tr');
                        const link = row['Filing Link'] ? `<a class="btn" href="${row['Filing Link']}" target="_blank">View</a>` : 'N/A';
                        tr.innerHTML = `<td><b>${row.Ticker}</b></td><td>${row.Company}</td><td>${row.Earnings}</td><td>${row['Last 10-K/Q']}</td><td>${link}</td>`;
                        tbody.appendChild(tr);
                    });
                }
            });
        }
        function filter() {
            const q = document.getElementById('search').value.toUpperCase();
            document.querySelectorAll('#mainTable tbody tr').forEach(tr => {
                tr.style.display = tr.innerText.toUpperCase().includes(q) ? '' : 'none';
            });
        }
        load();
    </script>
</body>
</html>
